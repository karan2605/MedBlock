{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/src/components/CreateAccount/CreateAccount.js\";\nimport React, { Component } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport { Button } from 'react-bootstrap';\nimport { Link } from \"react-router-dom\";\nimport '../HomePage/Style.css';\nimport { setDate, setField } from \"react\";\nimport CreateAccount from '../../abis/CreateAccount.json';\n\nvar ipfsClient = require('ipfs-http-client');\n\nvar Web3 = require('web3');\n\nvar ipfs = ipfsClient({\n  host: 'ipfs.infura.io',\n  port: 5001,\n  protocol: 'https'\n});\n\nvar Createaccount = /*#__PURE__*/function (_Component) {\n  _inherits(Createaccount, _Component);\n\n  _createClass(Createaccount, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadWeb3();\n\n              case 2:\n                _context.next = 4;\n                return this.loadBlockchainData();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }]);\n\n  function Createaccount(props) {\n    var _this;\n\n    _classCallCheck(this, Createaccount);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Createaccount).call(this, props));\n\n    _this.onSubmit = function (event) {\n      event.preventDefault();\n      var data = new File([JSON.stringify({\n        id: event.target[0].value,\n        firstName: event.target[1].value,\n        lastName: event.target[2].value,\n        dob: event.target[3].value,\n        email: event.target[4].value,\n        gp: event.target[5].value,\n        bloodGroup: event.target[6].value,\n        existingHealth: event.target[7].value\n      })], event.target[0].value + \".json\");\n      ipfs.add(data, function (error, result) {\n        console.log('Ipfs result', result);\n\n        if (error) {\n          console.error(error);\n          return;\n        }\n\n        _this.state.contract.methods.setHash(result[0].hash).request({\n          method: 'eth_sendTransaction',\n          from: _this.state.account\n        });\n      });\n    };\n\n    _this.state = {\n      contract: null,\n      web3: null,\n      account: null,\n      date: new Date(),\n      field: []\n    };\n    return _this;\n  }\n\n  _createClass(Createaccount, [{\n    key: \"loadWeb3\",\n    value: function () {\n      var _loadWeb = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!window.ethereum) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 3;\n                return window.ethereum.send('eth_requestAccounts');\n\n              case 3:\n                window.web3 = new Web3(window.ethereum);\n                return _context2.abrupt(\"return\", true);\n\n              case 7:\n                if (!window.web3) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                window.web3 = new Web3(window.web3.currentProvider);\n                _context2.next = 13;\n                break;\n\n              case 11:\n                window.alert('Non-Ethereum browser detected. You should consider trying MetaMask');\n                return _context2.abrupt(\"return\", false);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function loadWeb3() {\n        return _loadWeb.apply(this, arguments);\n      }\n\n      return loadWeb3;\n    }()\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var web3, networkId, accounts, networkData, contract;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                web3 = new Web3(window.ethereum);\n                _context3.next = 3;\n                return web3.eth.net.getId();\n\n              case 3:\n                networkId = _context3.sent;\n                _context3.next = 6;\n                return web3.eth.getAccounts();\n\n              case 6:\n                accounts = _context3.sent;\n                this.setState.account = accounts;\n                networkData = CreateAccount.networks[networkId];\n\n                if (networkData) {\n                  contract = new web3.eth.Contract(CreateAccount.abi, networkData.address);\n                  this.state.contract = contract;\n                } else {\n                  window.alert('Smart contract not deployed to detected network.');\n                }\n\n                console.log(this.state.account);\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"navbar navbar-expand-lg navbar-dark bg-dark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container px-lg-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"navbar-brand\",\n        href: \" \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"bi bi-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 58\n        }\n      }), \"  MedBlock\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"navbar-toggler\",\n        type: \"button\",\n        \"data-bs-toggle\": \"collapse\",\n        \"data-bs-target\": \"#navbarSupportedContent\",\n        \"aria-controls\": \"navbarSupportedContent\",\n        \"aria-expanded\": \"false\",\n        \"aria-label\": \"Toggle navigation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"navbar-toggler-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 233\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"collapse navbar-collapse\",\n        id: \"navbarSupportedContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"navbar-nav ms-auto mb-2 mb-lg-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 54\n        }\n      }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/login\",\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 54\n        }\n      }, \"Login\")))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-5 col-md-5 col-sm-5 container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-center align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-4 p-lg-5 bg-light rounded-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"display-5 fw-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }\n      }, \"Create Account\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }\n      }, \"Complete the form below to create a MedBlock account\"), /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"display-10 fw-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 29\n        }\n      }, \"Personal Details\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formUniqueId\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 37\n        }\n      }, \"Unique Identifier:\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: this.state.account,\n        name: \"Id\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formBasicFirstName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"First Name\",\n        name: \"fname\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formBasicLastName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Last Name\",\n        name: \"lname\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"DOB\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 33\n        }\n      }, \"Date of Birth:\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        name: \"dob\",\n        placeholder: \"Date of Birth\",\n        value: this.state.date,\n        onChange: function onChange(e) {\n          return setDate(e.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formBasicEmail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"email\",\n        placeholder: \"Email Address\",\n        name: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"display-10 fw-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 33\n        }\n      }, \"Medical Details\"), /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formBasicGpName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"GP Name\",\n        name: \"gp\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formBasicBlood\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Blood Group\",\n        name: \"bloodgroup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"my_multiselect_field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 33\n        }\n      }, \"Existing Health Conditions\"), /*#__PURE__*/React.createElement(Form.Control, {\n        as: \"select\",\n        multiple: true,\n        value: this.state.field,\n        onChange: function onChange(e) {\n          return setField([].slice.call(e.target.selectedOptions).map(function (item) {\n            return item.value;\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"field1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 37\n        }\n      }, \"Field 1\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"field2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 37\n        }\n      }, \"Field 2\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"field3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 37\n        }\n      }, \"Field 3\"))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        variant: \"danger\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 33\n        }\n      }, \"Create Account\"))))));\n    }\n  }]);\n\n  return Createaccount;\n}(Component);\n\nexport default Createaccount;","map":{"version":3,"sources":["/Users/kp/Desktop/Third Year/CS310 Project/CS310-Project/src/components/CreateAccount/CreateAccount.js"],"names":["React","Component","Form","Button","Link","setDate","setField","CreateAccount","ipfsClient","require","Web3","ipfs","host","port","protocol","Createaccount","loadWeb3","loadBlockchainData","props","onSubmit","event","preventDefault","data","File","JSON","stringify","id","target","value","firstName","lastName","dob","email","gp","bloodGroup","existingHealth","add","error","result","console","log","state","contract","methods","setHash","hash","request","method","from","account","web3","date","Date","field","window","ethereum","send","currentProvider","alert","eth","net","getId","networkId","getAccounts","accounts","setState","networkData","networks","Contract","abi","address","e","slice","call","selectedOptions","map","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport { Button } from 'react-bootstrap';\nimport { Link } from \"react-router-dom\";\nimport '../HomePage/Style.css';\nimport { setDate, setField } from \"react\";\nimport CreateAccount from '../../abis/CreateAccount.json';\n\nconst ipfsClient = require('ipfs-http-client')\nconst Web3 = require('web3');\nconst ipfs = ipfsClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\n\nclass Createaccount extends Component {\n\n    async componentWillMount() {\n        await this.loadWeb3()\n        await this.loadBlockchainData()\n      }\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            contract: null,\n            web3: null,\n            account: null,\n            date: new Date(),\n            field: [],\n        };\n    }\n\n    async loadWeb3() {\n        if (window.ethereum) {\n            await window.ethereum.send('eth_requestAccounts');\n            window.web3 = new Web3(window.ethereum);\n            return true;\n        }\n        else if (window.web3) {\n            window.web3 = new Web3(window.web3.currentProvider)\n        }\n        else {\n            window.alert('Non-Ethereum browser detected. You should consider trying MetaMask')\n            return false;\n        }\n    }\n\n    async loadBlockchainData() {\n        const web3 = new Web3(window.ethereum);\n        const networkId = await web3.eth.net.getId();\n        const accounts = await web3.eth.getAccounts();\n        this.setState.account = accounts;\n        const networkData = CreateAccount.networks[networkId];\n        if(networkData) {\n            const contract = new web3.eth.Contract(CreateAccount.abi, networkData.address);\n            this.state.contract = contract;\n        } \n        else {\n            window.alert('Smart contract not deployed to detected network.');\n        }\n        console.log(this.state.account)\n    }\n\n    onSubmit = (event) => {\n        event.preventDefault();\n\n        const data = new File([JSON.stringify({\n            id: event.target[0].value,\n            firstName: event.target[1].value,\n            lastName: event.target[2].value,\n            dob: event.target[3].value,\n            email: event.target[4].value,\n            gp: event.target[5].value,\n            bloodGroup: event.target[6].value,\n            existingHealth: event.target[7].value\n        })], event.target[0].value+\".json\");\n\n        ipfs.add(data, (error, result) => {\n            console.log('Ipfs result', result)\n            if(error) {\n            console.error(error)\n            return\n            }\n            this.state.contract.methods.setHash(result[0].hash).request({ method: 'eth_sendTransaction', from: this.state.account })\n        })\n    };\n\n    render() {\n        return (\n            <div>\n                <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n                    <div className=\"container px-lg-5\">\n                    <a className=\"navbar-brand\" href=\" \"><i className=\"bi bi-box\"></i>  MedBlock</a>\n                        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span className=\"navbar-toggler-icon\"></span></button>\n                        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                            <ul className=\"navbar-nav ms-auto mb-2 mb-lg-0\">\n                            <li className=\"nav-item\"><Link to=\"/\" className=\"nav-link\">Home</Link></li>\n                            <li className=\"nav-item\"><Link to='/login' className=\"nav-link\">Login</Link></li>\n                            </ul>\n                        </div>\n                    </div>\n                </nav>\n\n                <div className=\"col-lg-5 col-md-5 col-sm-5 container\">\n                    <div className=\"d-flex justify-content-center align-items-center\">\n                        <div className=\"p-4 p-lg-5 bg-light rounded-3\">\n                            \n                            <h1 className=\"display-5 fw-bold\">Create Account</h1>\n                            <p>Complete the form below to create a MedBlock account</p>\n                            <h2 className=\"display-10 fw-bold\">Personal Details</h2>\n\n                            <Form onSubmit={this.onSubmit}>\n                                <Form.Group className=\"mb-3\" controlId=\"formUniqueId\">\n                                    <Form.Label>Unique Identifier:</Form.Label>\n                                    <Form.Control type=\"text\" placeholder={this.state.account} name=\"Id\" disabled/>\n                                </Form.Group>\n\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicFirstName\">\n                                    <Form.Control type=\"text\" placeholder=\"First Name\" name=\"fname\"/>\n                                </Form.Group>\n\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicLastName\">\n                                    <Form.Control type=\"text\" placeholder=\"Last Name\" name=\"lname\"/>\n                                </Form.Group>\n\n                                <Form.Group controlId=\"DOB\">\n                                <Form.Label>Date of Birth:</Form.Label>\n                                <Form.Control\n                                    type=\"date\"\n                                    name=\"dob\"\n                                    placeholder=\"Date of Birth\"\n                                    value={this.state.date}\n                                    onChange={(e) => setDate(e.target.value)}\n                                />\n                                </Form.Group>\n\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n                                    <Form.Control type=\"email\" placeholder=\"Email Address\" name=\"email\"/>\n                                </Form.Group>\n\n                                <h2 className=\"display-10 fw-bold\">Medical Details</h2>\n\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicGpName\">\n                                    <Form.Control type=\"text\" placeholder=\"GP Name\" name=\"gp\"/>\n                                </Form.Group>\n\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicBlood\">\n                                    <Form.Control type=\"text\" placeholder=\"Blood Group\" name=\"bloodgroup\"/>\n                                </Form.Group>\n                                \n                                <Form.Group controlId=\"my_multiselect_field\">\n                                <Form.Label>Existing Health Conditions</Form.Label>\n                                <Form.Control as=\"select\" multiple value={this.state.field} onChange={e => setField([].slice.call(e.target.selectedOptions).map(item => item.value))}>\n                                    <option value=\"field1\">Field 1</option>\n                                    <option value=\"field2\">Field 2</option>\n                                    <option value=\"field3\">Field 3</option>\n                                </Form.Control>\n                                </Form.Group>\n                                <br></br>\n\n                                <Button variant=\"danger\" type=\"submit\">\n                                    Create Account\n                                </Button>\n                            </Form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )   \n    }\n}\n\nexport default Createaccount;"]},"metadata":{},"sourceType":"module"}